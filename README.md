# Klipper Configuration for Ender 3 Max (AI-Assisted Development)

This repository contains the Klipper firmware configuration for an **Ender 3 Max 3D printer**.

## Printer Hardware

* **Model:** Ender 3 Max
* **Mainboard:** BigTreeTech Manta M8P
* **Compute Module:** BigTreeTech CB1
* **Bed Leveling:** CR Touch
* **Z-Axis:** Dual Z Stepper configuration

## Project Overview

This repository is being used to test the capabilities of **Google Gemini Pro 2.5** in assisting with the programming and organization of Klipper configurations. The goal is to leverage AI to improve the structure, readability, and maintainability of the printer's firmware settings.

Old configuration data is archived in the `/PRE_AI_CFG` directory for reference.

### Configuration Organization

A significant effort has been made to modularize and clean up the Klipper configuration. All active configuration files are now centrally located under `printer_data/klipper_config/` for improved management and clarity.

* **Hardware Configuration:**
    * Hardware definitions, previously in a single large file, are now broken down into logical, smaller `.cfg` files.
    * These files are organized within the `hardware/` directory (e.g., `hardware/main_mcu.cfg`, `hardware/toolhead_mcu.cfg`, `hardware/fans.cfg`).
    * Sub-components like steppers and heaters have their own dedicated subdirectories (e.g., `hardware/steppers/stepper_x.cfg`, `hardware/heaters/extruder.cfg`).
    * This structure makes it much easier to locate, understand, and modify settings for specific physical components.

* **Macro Organization:**
    * G-code macros, which automate printer operations, are now grouped into thematic `.cfg` files within the `macros/` directory.
    * Examples include `macros/core_print.cfg` (for start/end print, pause/resume), `macros/filament_handling.cfg`, `macros/diagnostics_utilities.cfg`, and `macros/helper_macros.cfg` (for internal, reusable logic).
    * This modular approach simplifies macro management, enhances readability, and allows for easier expansion or modification of specific functionalities without affecting unrelated macros.

Feel free to discuss and share insights on this AI-assisted Klipper development journey!

## Printer Date Cleanup Summary

This section summarizes the automated solution implemented to manage the `printer-*.cfg` backup files generated by Mainsail.

The project utilizes a `move_backups.sh` script to automatically move older `printer-*.cfg` backup files into a dedicated `printer_cfg-old` subdirectory. This ensures that the main Klipper configuration directory remains tidy and uncluttered. The script is scheduled to run automatically upon every Raspberry Pi reboot, maintaining only the most recent backup files in the primary configuration location for easy access.
